<div class="page-header">
  <h1><%=t '.title', default: "User Profile" %></h1>
</div>

<% if @user == current_user %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="row">
        <div class="col-sm-6">
          <h4>Personenbezogene Daten</h4>
        </div>
        <div class="col-sm-6 text text-right">
          <%= link_to "Bearbeiten", edit_user_path, class: "btn btn-default" %>
        </div>
      </div>
    </div>
    <div class="panel-body">
      <p>Vorname: <%= current_user.first %></p>
      <p>Nachname: <%= current_user.last_name %></p>
      <p>Wohnort: <%= current_user.residence %></p>
      <p>Stra√üe: <%= current_user.street %></p>
      <p>Abteilung: <%= User::DIVISIONS[current_user.division_id] %></p>
      <p>Personalnummer: <%= current_user.personnel_number %></p>
      <p>E-Mail: <%= current_user.email %></p>
    </div>
  </div>

  <%= form_for(@user) do |f| %>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4><%= t('.holiday_Requests') %></h4>
      </div>
      <div class="panel-body">
        <div class="form-group">
          <%= f.label "Remaining Leave: #{current_user.remaining_leave.to_s} days " %>
          <% if current_user.remaining_leave_last_year > 0 %>
            <%= f.label "(thereof #{current_user.remaining_leave_last_year.to_s} from #{Date.today.year-1})" %>
            <% if Date.today <= Date.new(Date.today.year, 3, 31) %>
              <br><%= f.label "WARNING LABEL"%>
            <% end %>
          <% end %>
          <br><%= link_to t('.editLeave', default: t("helpers.links.editLeave")),
                        users_edit_leave_path(id: current_user.id), :class => 'btn btn-default btn-xs' %><br>
        </div>
        <div class="form-group">
          <table class="table table-striped">
            <thead>
              <tr>
                <th><%=t '.duration' %></th>
                <th><%=t '.start' %></th>
                <th><%=t '.end' %></th>
                <th><%=t '.status' %></th>
                <th><%=t '.actions', :default => t("helpers.actions") %></th>
              </tr>
            </thead>
            <tbody>
              <% current_user.holidays.each do |holiday| %>
                <tr>
                  <td><%= holiday.duration %><%= t(" days") %></td>
                  <td><%= holiday.start %></td>
                  <td><%=l holiday.end %></td>
                  <td><%= holiday.status %></td>
                  <td>
                    <%= link_to t('.showDetails', default: t("helpers.links.showDetails")),
                                holiday_path(holiday), class: 'btn btn-default btn-xs' %><br>
                    <%= link_to t('.showPDF', default: t("helpers.links.showPDF")), user_path(current_user.id), class: 'btn btn-default btn-xs' %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <div class="form-group">
          <%=link_to t('.request_holiday'), new_holiday_path, class: "btn btn-primary" %><br><br>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
